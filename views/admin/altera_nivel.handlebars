<div class="row justify-content-center align-items-center" style="min-height: 75vh;">
    <div class="col-md-4">
        <div class="card mb-3">
            <div class="card-header text-white text-center font-weight-bold" style="background-color: #1e5252;">
                Alterar Nível de Usuário
            </div>
            <div class="card-body p-4">
                <form action="/admin/alterar_usuario" method="post">
                    <div class="md-form">
                        <input type="text" id="nome" name="nome" class="form-control" list="nomeList" required>
                        <label for="nome">Nome do Usuário</label>
                        <datalist id="nomeList"></datalist>
                    </div>
                    <div class="md-form">
                        <select class="browser-default custom-select mb-4" name="nivel" required>
                            <option value="" disabled selected>Selecione o Nível</option>
                            <option value="0">Usuário Comum</option>
                            <option value="1">Administrador</option>
                        </select>
                    </div>
                    <button class="btn btn-success btn-block mt-4 waves-effect waves-light" type="submit">Alterar
                        Nível</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    const nomeInput = document.getElementById("nome");
    const nomeList = document.getElementById("nomeList");

    nomeInput.addEventListener("keyup", () => {
        const nome = nomeInput.value;
        if (nome.length >= 3) {
            fetch(`/admin/usuarios/${nome}`)
                .then(response => response.json())
                .then(nomesUsuarios => {
                    nomeList.innerHTML = "";
                    nomesUsuarios.forEach(nomeUsuario => {
                        const option = document.createElement("option");
                        option.value = nomeUsuario;
                        nomeList.appendChild(option);
                    });
                });
        } else {
            nomeList.innerHTML = "";
        }
    });
</script>